# äº‘åŸç”Ÿå¯è§‚æµ‹æ€§å¹³å° - Kubernetesç‰ˆæœ¬

è¿™æ˜¯ä¸€ä¸ªå°† `production-ready-observability-platform` å’Œ `microshop-microservices` æ•´åˆå¹¶è¿ç§»åˆ° Kubernetes çš„å®Œæ•´é¡¹ç›®ã€‚

## ğŸ¯ é¡¹ç›®ç›®æ ‡

1. âœ… å°†å¯è§‚æµ‹æ€§å¹³å°è¿ç§»åˆ° Kubernetes
2. âœ… ä½¿ç”¨ Helm Chart ç®¡ç†æ‰€æœ‰ç»„ä»¶
3. âœ… é›†æˆ Prometheus Operator
4. âœ… æ·»åŠ  HPA è‡ªåŠ¨æ‰©ç¼©å®¹
5. âœ… é›†æˆå¾®æœåŠ¡ï¼ˆuser-serviceã€product-serviceã€order-serviceï¼‰
6. âœ… å®ç°å®Œæ•´çš„ OpenTelemetry è¿½è¸ª

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ services/                      # å¾®æœåŠ¡æºä»£ç ï¼ˆåŒ…å« OpenTelemetryï¼‰
â”‚   â”œâ”€â”€ user-service/
â”‚   â”œâ”€â”€ product-service/
â”‚   â””â”€â”€ order-service/
â”œâ”€â”€ helm/                          # Helm Charts
â”‚   â”œâ”€â”€ observability-platform/   # å¯è§‚æµ‹æ€§å¹³å°Chart
â”‚   â””â”€â”€ microservices/             # å¾®æœåŠ¡Chart
â”œâ”€â”€ k8s/                           # Kubernetes åŸç”Ÿé…ç½®
â”‚   â”œâ”€â”€ namespaces/                # å‘½åç©ºé—´é…ç½®
â”‚   â”œâ”€â”€ monitoring/                 # ç›‘æ§ç›¸å…³é…ç½®
â”‚   â”œâ”€â”€ services/                  # å¾®æœåŠ¡éƒ¨ç½²é…ç½®
â”‚   â””â”€â”€ ingress/                   # Ingressé…ç½®
â”œâ”€â”€ scripts/                       # æ„å»ºå’Œéƒ¨ç½²è„šæœ¬
â”‚   â”œâ”€â”€ build-images.sh/.ps1      # æ„å»ºé•œåƒè„šæœ¬
â”‚   â””â”€â”€ setup-and-deploy.sh/.ps1  # å®Œæ•´éƒ¨ç½²è„šæœ¬
â””â”€â”€ docs/                          # æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Docker Desktop è¿è¡Œä¸­
- kubectl å·²å®‰è£…
- Helm 3.x å·²å®‰è£…
- kind å·²å®‰è£…ï¼ˆç”¨äºæœ¬åœ°é›†ç¾¤ï¼‰

### ä¸€é”®éƒ¨ç½²

#### Windows (PowerShell)

```powershell
# å®Œæ•´è®¾ç½®å’Œéƒ¨ç½²ï¼ˆåŒ…æ‹¬æ„å»ºé•œåƒï¼‰
.\scripts\setup-and-deploy.ps1
```

#### Linux/Mac (Bash)

```bash
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x scripts/*.sh

# å®Œæ•´è®¾ç½®å’Œéƒ¨ç½²
./scripts/setup-and-deploy.sh
```

### åˆ†æ­¥éƒ¨ç½²

#### 1. æ„å»º Docker é•œåƒ

```bash
# Windows
.\scripts\build-images.ps1

# Linux/Mac
./scripts/build-images.sh
```

#### 2. åˆ›å»º Kubernetes é›†ç¾¤

```bash
kind create cluster --name observability-platform
```

#### 3. éƒ¨ç½²æ‰€æœ‰ç»„ä»¶

```bash
# Windows
.\scripts\deploy.sh

# Linux/Mac
./scripts/deploy.sh
```

è¯¦ç»†æ­¥éª¤è¯·æŸ¥çœ‹ï¼š
- [NEXT_STEPS.md](NEXT_STEPS.md) - **ç«‹å³å¼€å§‹ï¼šä¸‹ä¸€æ­¥è¡ŒåŠ¨æŒ‡å—** â­
- [BUILD_AND_DEPLOY.md](BUILD_AND_DEPLOY.md) - æ„å»ºå’Œéƒ¨ç½²è¯¦è§£
- [LEARNING_NOTES.md](LEARNING_NOTES.md) - å­¦ä¹ ç¬”è®°ï¼ˆä¸ºä»€ä¹ˆè¿™ä¹ˆåšï¼‰

## ğŸ“Š æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Kubernetes Cluster                        â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  microservices namespace                           â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚    â”‚
â”‚  â”‚  â”‚   User   â”‚  â”‚ Product  â”‚  â”‚  Order   â”‚         â”‚    â”‚
â”‚  â”‚  â”‚ Service  â”‚  â”‚ Service  â”‚  â”‚ Service  â”‚         â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜         â”‚    â”‚
â”‚  â”‚       â”‚             â”‚             â”‚                 â”‚    â”‚
â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚    â”‚
â”‚  â”‚                    â”‚                                 â”‚    â”‚
â”‚  â”‚            OpenTelemetry SDK                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                       â”‚                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  observability namespace                             â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚  â”‚
â”‚  â”‚  â”‚Prometheusâ”‚  â”‚   Loki   â”‚  â”‚  Jaeger  â”‚           â”‚  â”‚
â”‚  â”‚  â”‚ Operator â”‚  â”‚          â”‚  â”‚          â”‚           â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜           â”‚  â”‚
â”‚  â”‚       â”‚             â”‚             â”‚                   â”‚  â”‚
â”‚  â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚  â”‚
â”‚  â”‚                    â”‚                                   â”‚  â”‚
â”‚  â”‚                 Grafana                                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                       â”‚                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
                  â”‚  Ingress  â”‚
                  â”‚  (Nginx)  â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ ç»„ä»¶è¯´æ˜

### å¾®æœåŠ¡
- **user-service**: ç”¨æˆ·ç®¡ç†æœåŠ¡ï¼ˆç«¯å£ 8001ï¼‰
- **product-service**: å•†å“ç®¡ç†æœåŠ¡ï¼ˆç«¯å£ 8002ï¼‰
- **order-service**: è®¢å•ç®¡ç†æœåŠ¡ï¼ˆç«¯å£ 8003ï¼‰

### å¯è§‚æµ‹æ€§ç»„ä»¶
- **Prometheus**: æŒ‡æ ‡é‡‡é›†å’Œå­˜å‚¨
- **Grafana Loki**: æ—¥å¿—èšåˆ
- **Jaeger**: åˆ†å¸ƒå¼è¿½è¸ª
- **Grafana**: ç»Ÿä¸€å¯è§†åŒ–å¹³å°

## ğŸ“ˆ ç›‘æ§å’Œå‘Šè­¦

- ServiceMonitor: è‡ªåŠ¨å‘ç°å’Œé‡‡é›†æŒ‡æ ‡
- PrometheusRule: å‘Šè­¦è§„åˆ™å®šä¹‰
- HPA: åŸºäºCPU/å†…å­˜çš„è‡ªåŠ¨æ‰©ç¼©å®¹

## ğŸ“ å­¦ä¹ è¦ç‚¹

### 1. Docker é•œåƒæ„å»º
- å¤šé˜¶æ®µæ„å»ºä¼˜åŒ–é•œåƒå¤§å°
- å¥åº·æ£€æŸ¥é…ç½®
- æœ€ä½³å®è·µ

### 2. OpenTelemetry é›†æˆ
- åˆ†å¸ƒå¼è¿½è¸ªé…ç½®
- è‡ªåŠ¨æ£€æµ‹ï¼ˆAuto-instrumentationï¼‰
- è‡ªå®šä¹‰ Span å’Œå±æ€§

### 3. Kubernetes éƒ¨ç½²
- Helm Chart ä½¿ç”¨
- æœåŠ¡å‘ç°
- è‡ªåŠ¨æ‰©ç¼©å®¹

è¯¦ç»†å­¦ä¹ è¯´æ˜è¯·æŸ¥çœ‹ä»£ç ä¸­çš„æ³¨é‡Šå’Œ [BUILD_AND_DEPLOY.md](BUILD_AND_DEPLOY.md)

## ğŸ”— ç›¸å…³é¡¹ç›®

- [production-ready-observability-platform](https://github.com/chenyuxiangAK47/production-ready-observability-platform)
- [microshop-microservices](https://github.com/chenyuxiangAK47/microshop-microservices)
- [Prometheus-Grafana](https://github.com/chenyuxiangAK47/Prometheus-Grafana)

## ğŸ“„ License

MIT License
