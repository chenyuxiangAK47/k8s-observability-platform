# æ›´æ”¹ AWS åŒºåŸŸæŒ‡å—

## ğŸ“ å½“å‰é…ç½®

å½“å‰æ‰€æœ‰ AWS èµ„æºéƒ½é…ç½®åœ¨ **us-east-1ï¼ˆç¾ä¸œ1åŒºï¼‰**ã€‚

---

## ğŸŒ ä¸ºä»€ä¹ˆé€‰æ‹© us-east-1ï¼Ÿ

**é»˜è®¤é€‰æ‹© us-east-1 çš„åŸå› ï¼š**
- âœ… æœ€ä¾¿å®œçš„åŒºåŸŸï¼ˆé€šå¸¸ï¼‰
- âœ… æœåŠ¡æœ€å…¨
- âœ… å»¶è¿Ÿå¯¹å¤§å¤šæ•°ç”¨æˆ·å¯æ¥å—
- âœ… é€‚åˆæµ‹è¯•å’Œå¼€å‘

---

## ğŸ”„ å¦‚ä½•æ›´æ”¹åˆ°æ–°åŠ å¡åŒºåŸŸï¼ˆap-southeast-1ï¼‰

### Step 1: æ›´æ–° GitHub Actions å·¥ä½œæµ

éœ€è¦æ›´æ–° `.github/workflows/cicd-aws-ecr.yml`ï¼š

```yaml
env:
  AWS_REGION: ap-southeast-1  # æ”¹ä¸ºæ–°åŠ å¡
```

å¹¶æ›´æ–°æ‰€æœ‰ `--region us-east-1` ä¸º `--region ap-southeast-1`ã€‚

### Step 2: æ›´æ–° Terraform é…ç½®

éœ€è¦æ›´æ–° `terraform/eks/variables.tf`ï¼š

```hcl
variable "aws_region" {
  description = "AWS region"
  type        = string
  default     = "ap-southeast-1"  # æ”¹ä¸ºæ–°åŠ å¡
}
```

### Step 3: åˆ›å»ºæ–°çš„ ECR ä»“åº“

åœ¨æ–°åŠ å¡åŒºåŸŸåˆ›å»º ECR ä»“åº“ï¼š

```powershell
aws ecr create-repository --repository-name user-service --region ap-southeast-1
aws ecr create-repository --repository-name product-service --region ap-southeast-1
aws ecr create-repository --repository-name order-service --region ap-southeast-1
```

### Step 4: æ›´æ–° Helm values.yaml

æ›´æ–° `helm/microservices/values.yaml` ä¸­çš„é•œåƒåœ°å€ï¼š

```yaml
global:
  imageRegistry: 324025606388.dkr.ecr.ap-southeast-1.amazonaws.com
```

---

## ğŸ“Š åŒºåŸŸå¯¹æ¯”

| åŒºåŸŸ | ä»£ç  | å»¶è¿Ÿï¼ˆä»ä¸­å›½ï¼‰ | æˆæœ¬ | æœåŠ¡å®Œæ•´æ€§ |
|------|------|---------------|------|-----------|
| **ç¾ä¸œ1åŒº** | us-east-1 | ~200-300ms | æœ€ä½ | â­â­â­â­â­ |
| **æ–°åŠ å¡** | ap-southeast-1 | ~50-100ms | ä¸­ç­‰ | â­â­â­â­â­ |
| **ä¸œäº¬** | ap-northeast-1 | ~80-150ms | ä¸­ç­‰ | â­â­â­â­â­ |
| **é¦–å°”** | ap-northeast-2 | ~60-120ms | ä¸­ç­‰ | â­â­â­â­â­ |

---

## ğŸ’° æˆæœ¬å½±å“

**ECR å­˜å‚¨æˆæœ¬ï¼ˆæ¯æœˆæ¯ GBï¼‰ï¼š**
- us-east-1: ~$0.10
- ap-southeast-1: ~$0.10ï¼ˆåŸºæœ¬ç›¸åŒï¼‰

**æ•°æ®ä¼ è¾“æˆæœ¬ï¼š**
- ä» us-east-1 åˆ°ä¸­å›½ï¼šè¾ƒé«˜
- ä» ap-southeast-1 åˆ°ä¸­å›½ï¼šè¾ƒä½

**EKS æ§åˆ¶å¹³é¢ï¼š**
- æ‰€æœ‰åŒºåŸŸï¼š~$0.10/å°æ—¶ï¼ˆç›¸åŒï¼‰

---

## ğŸš€ å¿«é€Ÿæ›´æ”¹æ­¥éª¤

### é€‰é¡¹ 1: ä¿æŒ us-east-1ï¼ˆæ¨èï¼Œå¦‚æœæˆæœ¬æ˜¯ä¸»è¦è€ƒè™‘ï¼‰

**ä¼˜ç‚¹ï¼š**
- âœ… æœ€ä¾¿å®œ
- âœ… ä¸éœ€è¦è¿ç§»ç°æœ‰èµ„æº
- âœ… æœåŠ¡æœ€å…¨

**ç¼ºç‚¹ï¼š**
- âŒ å»¶è¿Ÿç¨é«˜ï¼ˆå¯¹ä¸­å›½ç”¨æˆ·ï¼‰

### é€‰é¡¹ 2: è¿ç§»åˆ° ap-southeast-1ï¼ˆæ¨èï¼Œå¦‚æœå»¶è¿Ÿæ˜¯ä¸»è¦è€ƒè™‘ï¼‰

**ä¼˜ç‚¹ï¼š**
- âœ… å»¶è¿Ÿæ›´ä½ï¼ˆå¯¹ä¸­å›½ç”¨æˆ·ï¼‰
- âœ… æ•°æ®ä¼ è¾“æˆæœ¬æ›´ä½

**ç¼ºç‚¹ï¼š**
- âŒ éœ€è¦è¿ç§»ç°æœ‰èµ„æº
- âŒ éœ€è¦é‡æ–°åˆ›å»º ECR ä»“åº“

---

## ğŸ“ å¦‚æœé€‰æ‹©è¿ç§»åˆ°æ–°åŠ å¡

æˆ‘å¯ä»¥å¸®ä½ ï¼š
1. æ›´æ–°æ‰€æœ‰é…ç½®æ–‡ä»¶
2. åˆ›å»ºè¿ç§»è„šæœ¬
3. æ›´æ–°æ–‡æ¡£

å‘Šè¯‰æˆ‘ä½ çš„é€‰æ‹©ï¼Œæˆ‘ä¼šç«‹å³å¸®ä½ æ›´æ”¹ï¼

---

## ğŸ’¡ å»ºè®®

**å¦‚æœä½ åœ¨ä¸­å›½æˆ–ä¸œå—äºšï¼š**
- æ¨èä½¿ç”¨ **ap-southeast-1ï¼ˆæ–°åŠ å¡ï¼‰** æˆ– **ap-northeast-1ï¼ˆä¸œäº¬ï¼‰**
- å»¶è¿Ÿæ›´ä½ï¼Œç”¨æˆ·ä½“éªŒæ›´å¥½

**å¦‚æœæˆæœ¬æ˜¯ä¸»è¦è€ƒè™‘ï¼š**
- ä¿æŒ **us-east-1ï¼ˆç¾ä¸œ1åŒºï¼‰**
- æˆæœ¬æœ€ä½ï¼ŒæœåŠ¡æœ€å…¨

---

## ğŸ†˜ éœ€è¦å¸®åŠ©ï¼Ÿ

å‘Šè¯‰æˆ‘ä½ çš„é€‰æ‹©ï¼š
1. **ä¿æŒ us-east-1** - ä¸éœ€è¦æ›´æ”¹
2. **è¿ç§»åˆ° ap-southeast-1** - æˆ‘ä¼šå¸®ä½ æ›´æ–°æ‰€æœ‰é…ç½®
3. **è¿ç§»åˆ°å…¶ä»–åŒºåŸŸ** - å‘Šè¯‰æˆ‘åŒºåŸŸä»£ç 

