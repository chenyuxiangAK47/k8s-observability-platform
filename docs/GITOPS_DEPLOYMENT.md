# ğŸš€ GitOps + CI/CD å®Œæ•´éƒ¨ç½²æŒ‡å—

è¿™æ˜¯å°†é¡¹ç›®å‡çº§ä¸ºä¼ä¸šçº§ GitOps + CI/CD éƒ¨ç½²æµç¨‹çš„å®Œæ•´æŒ‡å—ã€‚

## ğŸ“‹ ç›®å½•

1. [ä»€ä¹ˆæ˜¯ GitOps + CI/CDï¼Ÿ](#ä»€ä¹ˆæ˜¯-gitops--cicd)
2. [æ¶æ„æ¦‚è§ˆ](#æ¶æ„æ¦‚è§ˆ)
3. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
4. [è¯¦ç»†æ­¥éª¤](#è¯¦ç»†æ­¥éª¤)
5. [CI/CD Pipeline è¯´æ˜](#cicd-pipeline-è¯´æ˜)
6. [ArgoCD é…ç½®è¯´æ˜](#argocd-é…ç½®è¯´æ˜)
7. [æ•…éšœæ’æŸ¥](#æ•…éšœæ’æŸ¥)
8. [é¢è¯•è¯æœ¯](#é¢è¯•è¯æœ¯)

---

## ğŸ¯ ä»€ä¹ˆæ˜¯ GitOps + CI/CDï¼Ÿ

### GitOps æ ¸å¿ƒæ¦‚å¿µ

**GitOps** æ˜¯ä¸€ç§å£°æ˜å¼éƒ¨ç½²æ–¹æ³•ï¼š

- âœ… **Git æ˜¯å”¯ä¸€çœŸå®æ¥æº**ï¼šæ‰€æœ‰é…ç½®éƒ½åœ¨ Git ä»“åº“ä¸­
- âœ… **å£°æ˜å¼é…ç½®**ï¼šæè¿°"æœŸæœ›çŠ¶æ€"ï¼Œç³»ç»Ÿè‡ªåŠ¨åŒæ­¥
- âœ… **è‡ªåŠ¨åŒ–åŒæ­¥**ï¼šGit å˜æ›´ â†’ è‡ªåŠ¨éƒ¨ç½²
- âœ… **å¯å®¡è®¡ã€å¯å›æ»š**ï¼šæ‰€æœ‰å˜æ›´éƒ½æœ‰ Git å†å²

### CI/CD Pipeline æµç¨‹

```
å¼€å‘è€…æäº¤ä»£ç 
    â†“
ğŸ” Lintï¼ˆä»£ç æ£€æŸ¥ï¼‰
    â†“
ğŸ—ï¸ Buildï¼ˆæ„å»º Docker é•œåƒï¼‰
    â†“
ğŸ§ª Testï¼ˆè¿è¡Œæµ‹è¯•ï¼‰
    â†“
ğŸ”’ Scanï¼ˆå®‰å…¨æ‰«æï¼‰
    â†“
ğŸš€ Deployï¼ˆæ›´æ–° Git â†’ ArgoCD è‡ªåŠ¨åŒæ­¥ï¼‰
```

---

## ğŸ“Š æ¶æ„æ¦‚è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GitHub Repository                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Code       â”‚  â”‚   Helm       â”‚  â”‚   GitOps     â”‚     â”‚
â”‚  â”‚   (services) â”‚  â”‚   Charts     â”‚  â”‚   Configs    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                  â”‚                 â”‚
          â”‚                  â”‚                 â”‚
          â–¼                  â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              GitHub Actions CI/CD Pipeline                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Lint   â”‚â†’ â”‚   Build  â”‚â†’ â”‚   Test   â”‚â†’ â”‚   Scan   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                     â”‚                                       â”‚
â”‚                     â–¼                                       â”‚
â”‚              Push to GHCR                                    â”‚
â”‚              (Docker Images)                                 â”‚
â”‚                     â”‚                                       â”‚
â”‚                     â–¼                                       â”‚
â”‚         Update helm/values.yaml                             â”‚
â”‚         (with new image tags)                               â”‚
â”‚                     â”‚                                       â”‚
â”‚                     â–¼                                       â”‚
â”‚              Commit to Git                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ArgoCD (GitOps)                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Watch Git Repository                                 â”‚  â”‚
â”‚  â”‚  Detect Changes â†’ Sync to Kubernetes                 â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Kubernetes Cluster                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   User       â”‚  â”‚   Product    â”‚  â”‚   Order      â”‚     â”‚
â”‚  â”‚   Service    â”‚  â”‚   Service    â”‚  â”‚   Service    â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- âœ… Docker Desktop è¿è¡Œä¸­
- âœ… kubectl å·²å®‰è£…
- âœ… Helm 3.x å·²å®‰è£…
- âœ… kind å·²å®‰è£…ï¼ˆç”¨äºæœ¬åœ°é›†ç¾¤ï¼‰
- âœ… GitHub ä»“åº“ï¼ˆç”¨äº CI/CDï¼‰

### ä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

#### Windows (PowerShell)

```powershell
# 1. å®‰è£… ArgoCD
.\scripts\install-argocd.ps1

# 2. éƒ¨ç½² GitOps Applications
.\scripts\deploy-gitops.ps1
```

#### Linux/Mac (Bash)

```bash
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x scripts/*.sh

# 1. å®‰è£… ArgoCD
./scripts/install-argocd.sh

# 2. éƒ¨ç½² GitOps Applications
./scripts/deploy-gitops.sh
```

---

## ğŸ“ è¯¦ç»†æ­¥éª¤

### æ­¥éª¤ 1: è®¾ç½® GitHub Container Registry (GHCR)

1. **å¯ç”¨ GitHub Packages**
   - è¿›å…¥ GitHub ä»“åº“ â†’ Settings â†’ Actions â†’ General
   - ç¡®ä¿ "Read and write permissions" å·²å¯ç”¨

2. **é…ç½® GitHub Tokenï¼ˆè‡ªåŠ¨ï¼‰**
   - GitHub Actions ä¼šè‡ªåŠ¨ä½¿ç”¨ `GITHUB_TOKEN`
   - æ— éœ€æ‰‹åŠ¨é…ç½®

### æ­¥éª¤ 2: å®‰è£… ArgoCD

```bash
# Windows
.\scripts\install-argocd.ps1

# Linux/Mac
./scripts/install-argocd.sh
```

**è·å– ArgoCD å¯†ç ï¼š**

```bash
# Linux/Mac
kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d

# Windows PowerShell
kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath='{.data.password}' | ForEach-Object { [System.Text.Encoding]::UTF8.GetString([System.Convert]::FromBase64String($_)) }
```

**è®¿é—® ArgoCD UIï¼š**

```bash
# ç«¯å£è½¬å‘
kubectl port-forward svc/argocd-server -n argocd 8080:443

# æ‰“å¼€æµè§ˆå™¨
# https://localhost:8080
# ç”¨æˆ·å: admin
# å¯†ç : (ä»ä¸Šé¢è·å–)
```

### æ­¥éª¤ 3: é…ç½® ArgoCD è®¿é—® Git ä»“åº“

å¦‚æœä»“åº“æ˜¯ç§æœ‰çš„ï¼Œéœ€è¦é…ç½® SSH å¯†é’¥æˆ–è®¿é—®ä»¤ç‰Œï¼š

```bash
# ä½¿ç”¨ ArgoCD CLI ç™»å½•
argocd login localhost:8080

# æ·»åŠ  Git ä»“åº“ï¼ˆå¦‚æœéœ€è¦ï¼‰
argocd repo add https://github.com/chenyuxiangAK47/k8s-observability-platform \
  --type git \
  --name k8s-observability-platform
```

### æ­¥éª¤ 4: éƒ¨ç½² GitOps Applications

```bash
# Windows
.\scripts\deploy-gitops.ps1

# Linux/Mac
./scripts/deploy-gitops.sh
```

### æ­¥éª¤ 5: éªŒè¯éƒ¨ç½²

```bash
# æŸ¥çœ‹ ArgoCD Applications
kubectl get applications -n argocd

# æŸ¥çœ‹åº”ç”¨çŠ¶æ€
argocd app list
argocd app get microservices

# æŸ¥çœ‹ Pods
kubectl get pods -n microservices
kubectl get pods -n observability
```

---

## ğŸ”„ CI/CD Pipeline è¯´æ˜

### Pipeline é˜¶æ®µè¯¦è§£

#### 1. ğŸ” Lintï¼ˆä»£ç æ£€æŸ¥ï¼‰

- **Kubernetes YAML éªŒè¯**ï¼šç¡®ä¿æ‰€æœ‰ YAML æ–‡ä»¶è¯­æ³•æ­£ç¡®
- **Helm Chart éªŒè¯**ï¼šæ£€æŸ¥ Chart é…ç½®å’Œæ¨¡æ¿
- **Python ä»£ç æ£€æŸ¥**ï¼šè¯­æ³•æ£€æŸ¥å’Œä»£ç é£æ ¼

#### 2. ğŸ—ï¸ Buildï¼ˆæ„å»ºé•œåƒï¼‰

- **å¤šæœåŠ¡å¹¶è¡Œæ„å»º**ï¼šuser-serviceã€product-serviceã€order-service
- **æ¨é€åˆ° GHCR**ï¼š`ghcr.io/<username>/<service>:<tag>`
- **é•œåƒæ ‡ç­¾ç­–ç•¥**ï¼š
  - `latest`ï¼šä¸»åˆ†æ”¯æœ€æ–°ç‰ˆæœ¬
  - `<sha>`ï¼šGit commit SHA
  - `<branch>`ï¼šåˆ†æ”¯å

#### 3. ğŸ§ª Testï¼ˆè¿è¡Œæµ‹è¯•ï¼‰

- **å¥åº·æ£€æŸ¥æµ‹è¯•**ï¼šç¡®ä¿æœåŠ¡å¯ä»¥æ­£å¸¸å¯åŠ¨
- **å¯¼å…¥æµ‹è¯•**ï¼šéªŒè¯ä»£ç å¯ä»¥æ­£ç¡®å¯¼å…¥

#### 4. ğŸ”’ Scanï¼ˆå®‰å…¨æ‰«æï¼‰

- **Trivy æ¼æ´æ‰«æ**ï¼šæ‰«æ Docker é•œåƒä¸­çš„å®‰å…¨æ¼æ´
- **ç»“æœä¸Šä¼ åˆ° GitHub Security**ï¼šåœ¨ä»“åº“çš„ Security æ ‡ç­¾é¡µæŸ¥çœ‹

#### 5. ğŸš€ Deployï¼ˆGitOps éƒ¨ç½²ï¼‰

- **æ›´æ–° Helm values**ï¼šè‡ªåŠ¨æ›´æ–°é•œåƒæ ‡ç­¾
- **æäº¤åˆ° Git**ï¼šè§¦å‘ ArgoCD è‡ªåŠ¨åŒæ­¥
- **ArgoCD åŒæ­¥**ï¼šè‡ªåŠ¨éƒ¨ç½²åˆ° Kubernetes

### è§¦å‘æ¡ä»¶

Pipeline ä¼šåœ¨ä»¥ä¸‹æƒ…å†µè§¦å‘ï¼š

- âœ… æ¨é€åˆ° `main` æˆ– `master` åˆ†æ”¯
- âœ… åˆ›å»º Pull Request
- âœ… æ‰‹åŠ¨è§¦å‘ï¼ˆworkflow_dispatchï¼‰

### æŸ¥çœ‹ Pipeline çŠ¶æ€

1. è¿›å…¥ GitHub ä»“åº“
2. ç‚¹å‡» "Actions" æ ‡ç­¾
3. æŸ¥çœ‹æœ€æ–°çš„å·¥ä½œæµè¿è¡Œ

---

## ğŸ›ï¸ ArgoCD é…ç½®è¯´æ˜

### Application é…ç½®ç»“æ„

```yaml
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: microservices
spec:
  source:
    repoURL: <Git ä»“åº“åœ°å€>
    path: helm/microservices  # Helm Chart è·¯å¾„
  destination:
    namespace: microservices  # ç›®æ ‡å‘½åç©ºé—´
  syncPolicy:
    automated:
      prune: true      # åˆ é™¤ Git ä¸­ä¸å­˜åœ¨çš„èµ„æº
      selfHeal: true   # è‡ªåŠ¨ä¿®å¤æ‰‹åŠ¨ä¿®æ”¹
```

### åŒæ­¥ç­–ç•¥

- **è‡ªåŠ¨åŒæ­¥**ï¼šGit å˜æ›´åè‡ªåŠ¨åŒæ­¥ï¼ˆé€‚åˆå¼€å‘/æµ‹è¯•ç¯å¢ƒï¼‰
- **æ‰‹åŠ¨åŒæ­¥**ï¼šéœ€è¦æ‰‹åŠ¨è§¦å‘ï¼ˆé€‚åˆç”Ÿäº§ç¯å¢ƒï¼‰

### å¥åº·æ£€æŸ¥

ArgoCD ä¼šè‡ªåŠ¨æ£€æŸ¥ï¼š

- Deployment æ˜¯å¦å°±ç»ª
- Service æ˜¯å¦å¯ç”¨
- Pod æ˜¯å¦è¿è¡Œ

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: CI/CD Pipeline å¤±è´¥

**æ£€æŸ¥ç‚¹ï¼š**

```bash
# æŸ¥çœ‹ GitHub Actions æ—¥å¿—
# è¿›å…¥ä»“åº“ â†’ Actions â†’ æŸ¥çœ‹å¤±è´¥çš„ Job

# å¸¸è§é—®é¢˜ï¼š
# 1. Docker é•œåƒæ„å»ºå¤±è´¥ â†’ æ£€æŸ¥ Dockerfile
# 2. æµ‹è¯•å¤±è´¥ â†’ æ£€æŸ¥æµ‹è¯•ä»£ç 
# 3. æƒé™é—®é¢˜ â†’ æ£€æŸ¥ GitHub Token æƒé™
```

### é—®é¢˜ 2: ArgoCD æ— æ³•åŒæ­¥

**æ£€æŸ¥ç‚¹ï¼š**

```bash
# æŸ¥çœ‹ Application çŠ¶æ€
argocd app get microservices

# æŸ¥çœ‹åŒæ­¥æ—¥å¿—
argocd app logs microservices

# æ£€æŸ¥ Git ä»“åº“è®¿é—®
argocd repo list

# æ‰‹åŠ¨åŒæ­¥
argocd app sync microservices
```

### é—®é¢˜ 3: é•œåƒæ‹‰å–å¤±è´¥

**æ£€æŸ¥ç‚¹ï¼š**

```bash
# æ£€æŸ¥é•œåƒæ˜¯å¦å­˜åœ¨
docker pull ghcr.io/<username>/user-service:latest

# æ£€æŸ¥é•œåƒæ‹‰å–å¯†é’¥
kubectl get secrets -n microservices

# å¦‚æœéœ€è¦ï¼Œåˆ›å»ºé•œåƒæ‹‰å–å¯†é’¥
kubectl create secret docker-registry ghcr-secret \
  --docker-server=ghcr.io \
  --docker-username=<username> \
  --docker-password=<token> \
  -n microservices
```

### é—®é¢˜ 4: Pod æ— æ³•å¯åŠ¨

**æ£€æŸ¥ç‚¹ï¼š**

```bash
# æŸ¥çœ‹ Pod çŠ¶æ€
kubectl get pods -n microservices

# æŸ¥çœ‹ Pod æ—¥å¿—
kubectl logs -n microservices <pod-name>

# æŸ¥çœ‹ Pod äº‹ä»¶
kubectl describe pod -n microservices <pod-name>
```

---

## ğŸ’¡ é¢è¯•è¯æœ¯

### é—®é¢˜ 1: "ä½ äº†è§£ GitOps å—ï¼Ÿ"

**å›ç­”ï¼š**

> "æˆ‘åœ¨é¡¹ç›®ä¸­å®ç°äº†å®Œæ•´çš„ GitOps éƒ¨ç½²æµç¨‹ã€‚ä½¿ç”¨ ArgoCD å®ç°å£°æ˜å¼éƒ¨ç½²ï¼Œæ‰€æœ‰é…ç½®éƒ½åœ¨ Git ä»“åº“ä¸­ï¼Œé€šè¿‡ CI/CD Pipeline è‡ªåŠ¨æ„å»ºé•œåƒå¹¶æ›´æ–°é…ç½®ï¼ŒArgoCD è‡ªåŠ¨æ£€æµ‹ Git å˜æ›´å¹¶åŒæ­¥åˆ° Kubernetes é›†ç¾¤ã€‚è¿™ç§æ–¹å¼å®ç°äº†å¯å®¡è®¡ã€å¯å›æ»šçš„ç”Ÿäº§çº§éƒ¨ç½²æµç¨‹ï¼Œå¤§å¤§æé«˜äº†éƒ¨ç½²æ•ˆç‡å’Œå¯é æ€§ã€‚"

### é—®é¢˜ 2: "ä½ çš„ CI/CD Pipeline åŒ…å«å“ªäº›é˜¶æ®µï¼Ÿ"

**å›ç­”ï¼š**

> "æˆ‘çš„ CI/CD Pipeline åŒ…å« 5 ä¸ªé˜¶æ®µï¼š
> 1. **Lint**ï¼šä»£ç æ£€æŸ¥ï¼ŒåŒ…æ‹¬ Kubernetes YAMLã€Helm Chartsã€Python ä»£ç 
> 2. **Build**ï¼šå¹¶è¡Œæ„å»ºä¸‰ä¸ªå¾®æœåŠ¡çš„ Docker é•œåƒï¼Œæ¨é€åˆ° GitHub Container Registry
> 3. **Test**ï¼šè¿è¡Œå¥åº·æ£€æŸ¥å’Œå¯¼å…¥æµ‹è¯•
> 4. **Scan**ï¼šä½¿ç”¨ Trivy è¿›è¡Œå®‰å…¨æ¼æ´æ‰«æ
> 5. **Deploy**ï¼šè‡ªåŠ¨æ›´æ–° Helm values ä¸­çš„é•œåƒæ ‡ç­¾ï¼Œæäº¤åˆ° Gitï¼Œè§¦å‘ ArgoCD è‡ªåŠ¨åŒæ­¥
> 
> æ•´ä¸ªæµç¨‹å®Œå…¨è‡ªåŠ¨åŒ–ï¼Œä»ä»£ç æäº¤åˆ°éƒ¨ç½²ä¸Šçº¿æ— éœ€äººå·¥å¹²é¢„ã€‚"

### é—®é¢˜ 3: "GitOps ç›¸æ¯”ä¼ ç»Ÿéƒ¨ç½²æœ‰ä»€ä¹ˆä¼˜åŠ¿ï¼Ÿ"

**å›ç­”ï¼š**

> "GitOps çš„æ ¸å¿ƒä¼˜åŠ¿åŒ…æ‹¬ï¼š
> 1. **å¯å®¡è®¡æ€§**ï¼šæ‰€æœ‰å˜æ›´éƒ½åœ¨ Git ä¸­ï¼Œæœ‰å®Œæ•´çš„æäº¤å†å²å’Œè´£ä»»äºº
> 2. **å¯å›æ»š**ï¼šé€šè¿‡ Git revert å¯ä»¥å¿«é€Ÿå›æ»šåˆ°ä»»ä½•å†å²ç‰ˆæœ¬
> 3. **ä¸€è‡´æ€§**ï¼šæ‰€æœ‰ç¯å¢ƒï¼ˆå¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰ä½¿ç”¨ç›¸åŒçš„é…ç½®å’Œæµç¨‹
> 4. **è‡ªåŠ¨åŒ–**ï¼šå‡å°‘äººå·¥æ“ä½œï¼Œé™ä½äººä¸ºé”™è¯¯
> 5. **å®‰å…¨æ€§**ï¼šé€šè¿‡ Git çš„æƒé™æ§åˆ¶ï¼Œç¡®ä¿åªæœ‰æˆæƒäººå‘˜å¯ä»¥ä¿®æ”¹é…ç½®
> 
> æˆ‘åœ¨é¡¹ç›®ä¸­å®ç°äº†è‡ªåŠ¨åŒæ­¥ç­–ç•¥ï¼ŒGit å˜æ›´å 30 ç§’å†…è‡ªåŠ¨éƒ¨ç½²åˆ°é›†ç¾¤ï¼Œå¤§å¤§æé«˜äº†éƒ¨ç½²æ•ˆç‡ã€‚"

### é—®é¢˜ 4: "ä½ å¦‚ä½•å¤„ç†å¤šç¯å¢ƒéƒ¨ç½²ï¼Ÿ"

**å›ç­”ï¼š**

> "æˆ‘ä½¿ç”¨ Helm Charts å®ç°å¤šç¯å¢ƒéƒ¨ç½²ï¼š
> 1. **é…ç½®åˆ†ç¦»**ï¼šæ¯ä¸ªç¯å¢ƒæœ‰ç‹¬ç«‹çš„ values.yamlï¼ˆvalues-dev.yamlã€values-prod.yamlï¼‰
> 2. **ArgoCD Projects**ï¼šä¸ºä¸åŒç¯å¢ƒåˆ›å»ºä¸åŒçš„ ArgoCD Projectï¼Œå®ç°æƒé™éš”ç¦»
> 3. **å‘½åç©ºé—´éš”ç¦»**ï¼šä¸åŒç¯å¢ƒä½¿ç”¨ä¸åŒçš„ Kubernetes å‘½åç©ºé—´
> 4. **é•œåƒæ ‡ç­¾ç­–ç•¥**ï¼šå¼€å‘ç¯å¢ƒä½¿ç”¨ `latest`ï¼Œç”Ÿäº§ç¯å¢ƒä½¿ç”¨ Git SHA ä½œä¸ºæ ‡ç­¾
> 
> è¿™æ ·å¯ä»¥ç¡®ä¿é…ç½®çš„ä¸€è‡´æ€§ï¼ŒåŒæ—¶ä¿æŒç¯å¢ƒçš„éš”ç¦»æ€§ã€‚"

---

## ğŸ“š ç›¸å…³èµ„æº

- [ArgoCD å®˜æ–¹æ–‡æ¡£](https://argo-cd.readthedocs.io/)
- [GitHub Actions æ–‡æ¡£](https://docs.github.com/en/actions)
- [GitOps æœ€ä½³å®è·µ](https://www.gitops.tech/)
- [Helm æ–‡æ¡£](https://helm.sh/docs/)

---

## ğŸ‰ æ€»ç»“

å®Œæˆè¿™ä¸ª GitOps + CI/CD æ–¹æ¡ˆåï¼Œä½ å°†æ‹¥æœ‰ï¼š

- âœ… **ä¼ä¸šçº§ CI/CD Pipeline**ï¼šå®Œæ•´çš„è‡ªåŠ¨åŒ–æ„å»ºå’Œéƒ¨ç½²æµç¨‹
- âœ… **GitOps éƒ¨ç½²**ï¼šå£°æ˜å¼ã€å¯å®¡è®¡ã€å¯å›æ»šçš„éƒ¨ç½²æ–¹å¼
- âœ… **ç”Ÿäº§çº§å®è·µ**ï¼šç¬¦åˆè¡Œä¸šæœ€ä½³å®è·µçš„é¡¹ç›®ç»“æ„
- âœ… **é¢è¯•ä¼˜åŠ¿**ï¼šå¯ä»¥è‡ªä¿¡åœ°å›ç­”æ‰€æœ‰ GitOps å’Œ CI/CD ç›¸å…³é—®é¢˜

**ä¸‹ä¸€æ­¥å»ºè®®ï¼š**

1. å°è¯•ä¿®æ”¹ä»£ç ï¼Œè§‚å¯Ÿ CI/CD Pipeline è‡ªåŠ¨è¿è¡Œ
2. åœ¨ ArgoCD UI ä¸­æŸ¥çœ‹åº”ç”¨çŠ¶æ€å’ŒåŒæ­¥å†å²
3. å°è¯•æ‰‹åŠ¨ä¿®æ”¹é›†ç¾¤èµ„æºï¼Œè§‚å¯Ÿ ArgoCD è‡ªåŠ¨ä¿®å¤
4. å®ç°å¤šç¯å¢ƒéƒ¨ç½²ï¼ˆå¼€å‘/æµ‹è¯•/ç”Ÿäº§ï¼‰

---

**æœ€åæ›´æ–°ï¼š2025-01-XX**



